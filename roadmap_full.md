# Дорожная карта и подробный план действий для завершения проекта

---

## 1. Backend (Python/FastAPI)

### 1.1. DICOM/Пользователь/Пациент
- [ ] Доработать загрузку и хранение пациентов (структура данных, уникальные ID, связь с DICOM).
- [ ] Реализовать полноценное API для создания, поиска, удаления, редактирования пациентов.
- [ ] Улучшить обработку ошибок и валидацию данных.

### 1.2. Импорт, парсинг и валидация DICOM
- [x] Импорт и парсинг реализованы, покрыть тестами edge-cases.
- [ ] Добавить полноценное логирование и аудит действий пользователя.

### 1.3. Сегментация и 3D-реконструкция
- [x] Базовая сегментация и экспорт масок реализованы.
- [ ] Добавить выбор/корректировку параметров сегментации через API.
- [ ] Реализовать ручную корректировку масок (если требуется по макету).

### 1.4. Работа с 3D-моделями
- [x] Загрузка STL/GLTF, получение точек реализованы.
- [ ] Доработать экспорт для передачи в Unity (форматы, метаданные).

### 1.5. Алгоритмы троакаров
- [x] Алгоритм расчёта реализован.
- [ ] Добавить ручную корректировку точек через API.
- [ ] Поддержать дополнительные ограничения (forbidden зоны, углы и др.).

### 1.6. Экспорт отчётов, логов, скриншотов
- [ ] Реализовать генерацию PDF-отчётов (reportlab).
- [ ] Экспорт PNG-скриншотов, логов (JSON/CSV).
- [ ] API для скачивания и просмотра отчётов.

### 1.7. API и интеграция
- [ ] Проверить соответствие всех эндпоинтов макету Figma.
- [ ] Описать OpenAPI/Swagger для удобства интеграции с Unity.
- [ ] Добавить CORS, авторизацию (если требуется).

### 1.8. Тесты
- [x] Базовые тесты есть.
- [ ] Покрыть все новые сценарии, edge-cases, интеграционные тесты.
- [ ] Тестировать загрузку, сегментацию, расчёт троакаров, экспорт.

---

## 2. Unity/AR-клиент

### 2.1. Архитектура и структура проекта
- [ ] Настроить проект под целевые платформы (AR/VR-очки, ПК, планшет).
- [ ] Подключить необходимые плагины (GLTF loader, AR Foundation, XR Interaction Toolkit и др.).

### 2.2. Импорт данных и взаимодействие с API
- [ ] Реализовать модуль авторизации и выбора пациента.
- [ ] Реализовать загрузку и отображение списка пациентов, снимков, моделей через API.
- [ ] Интегрировать загрузку 3D-модели органа (GLTF/OBJ) из backend.
- [ ] Реализовать загрузку и отображение точек троакаров.

### 2.3. Визуализация и UI
- [ ] Реализовать основную сцену с интерфейсом из Figma (панели, кнопки, списки, статусы).
- [ ] Визуализировать 3D-модель органа, overlay троакаров, стрелки, подсказки.
- [ ] Реализовать обработку пользовательских действий (выбор, вращение, масштаб, корректировка точек).
- [ ] Добавить поддержку AR-меток/QR-кодов для позиционирования модели (если требуется).

### 2.4. AR/VR-интеграция
- [ ] Интегрировать камеру устройства, потоковое отображение.
- [ ] Реализовать overlay 3D-модели в реальном пространстве.
- [ ] Тестировать трекинг, совместимость с устройствами.

### 2.5. Экспорт и отчёты
- [ ] Добавить экспорт скриншотов, логов сессии (через API).
- [ ] Реализовать просмотр и скачивание отчётов пользователя.

### 2.6. Тесты и отладка
- [ ] Покрыть UI и бизнес-логику автотестами (PlayMode, EditMode).
- [ ] Проверить все сценарии Figma, баг-репорты, UX-юзабилити.

---

## 3. Интеграция и DevOps

### 3.1. Документация
- [ ] Обновить README, инструкции по запуску, схемы архитектуры.
- [ ] Описать API, форматы данных, сценарии использования.

### 3.2. CI/CD
- [ ] Настроить автоматическую сборку, тестирование и деплой backend.
- [ ] Настроить сборку и экспорт Unity-проекта под целевые платформы.

### 3.3. Инфраструктура
- [ ] Подготовить Docker-окружение (по необходимости).
- [ ] Организовать хранение данных (локально/облако).

---

## 4. Финальное тестирование и релиз

- [ ] Провести интеграционное тестирование полного сценария (от загрузки пациента до отображения в AR/VR).
- [ ] Провести user acceptance testing (UAT) с врачами/целевой аудиторией.
- [ ] Исправить баги, собрать обратную связь.
- [ ] Подготовить релизную сборку и инструкции для пользователей.

---

## 5. (Опционально) Поддержка и развитие

- [ ] Сбор и анализ логов использования.
- [ ] Добавление новых функций по обратной связи.
- [ ] Поддержка новых устройств/платформ.

---

**Если есть доступ к Figma — сверяйте каждый UI-экран и сценарий с этим планом!**
